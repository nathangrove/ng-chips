{"version":3,"file":"ng-chips.js.map","sources":["ng://ng-chips/lib/chips.component.ts","ng://ng-chips/lib/focus-on-init.directive.ts","ng://ng-chips/lib/chips.module.ts"],"sourcesContent":["import { Component, ChangeDetectorRef, IterableDiffers, Input, Output, EventEmitter, AfterViewInit, ViewEncapsulation } from '@angular/core';\n\n\n@Component({\n  selector: 'ng-chips',\n  template: `\n  <div id=\"ng-chips-wrapper\" (click)=\"toggleSelector()\">\n  \n    <div class=\"placeholder\" *ngIf=\"!value.length\">{{ emptyState }}</div>\n    \n      <div *ngFor=\"let chip of value\" class=\"chipit\">\n        <div [ngClass]=\"{'disabled': disabled, 'value': true}\">{{ chip[displayKey] }}</div>\n        <div class=\"remove\" *ngIf=\"!disabled\" (click)=\"remove(chip)\">x</div>\n      </div>\n    \n      <div class=\"addition\" *ngIf=\"value.length && getOptions().length && !disabled && multiple\">{{ placeholder }}</div>\n    \n      <div class=\"clearfix\"></div>\n    </div>\n  \n    <div id=\"ng-chips-selector\" class=\"rounded\" *ngIf=\"selectorOpen\">\n      <input type=\"text\" (keyup)=\"search($event)\" class='search' placeholder=\"Search\" focusOnInit />\n    <div *ngFor=\"let option of getOptions()\" (click)=\"add(option)\" [ngClass]=\"{'option': true, 'focused': getOptions()[optionsPointer] == option }\">{{ option[displayKey] }}</div>\n  </div>\n  `,\n  styles: [`#ng-chips-wrapper{position:relative;line-height:1;min-height:50px;cursor:pointer;border:1px solid #d2d2d2;padding:5px;border-radius:2px}#ng-chips-wrapper .placeholder{float:left;color:grey;font-size:20px;margin-left:5px}#ng-chips-wrapper .chipit{float:left;background-color:#d6d6d6;border-radius:1000px;margin:3px;font-size:13px;height:32px;padding-left:12px}#ng-chips-wrapper .chipit .value{float:left;margin-right:4px;margin-top:9px}#ng-chips-wrapper .chipit .value.disabled{margin-right:12px}#ng-chips-wrapper .chipit .remove{text-align:center;float:left;background-color:#bdbdbd;color:#fff;border-radius:50%;width:24px;height:24px;margin:4px;padding-top:2px;font-size:18px}#ng-chips-wrapper .chipit:hover{background-color:#888;color:#fff}#ng-chips-wrapper .chipit:hover .remove{background-color:#fff;color:#888}#ng-chips-wrapper .addition{float:left;margin-top:12px;color:grey;font-size:13px}#ng-chips-wrapper .clearfix:after{visibility:hidden;display:block;font-size:0;content:\" \";clear:both;height:0}#ng-chips-wrapper * html .clearfix{zoom:1}#ng-chips-selector{background-color:#fff;z-index:1000;position:absolute;border:1px solid #c9c9c9;padding:3px;min-width:300px;max-height:200px;overflow-y:scroll;overflow-x:hidden}#ng-chips-selector .search{width:90%;margin:5px;border-width:0 0 1px;border-style:solid;border-color:#c9c9c9;outline:0;box-shadow:none!important}#ng-chips-selector .option{padding:3px}#ng-chips-selector .option .focused,#ng-chips-selector .option:hover{background-color:#d3d3d3}#ng-chips-selector .rounded{border-radius:5px}`],\n  host: {\n    '(document:click)': 'closeSelector()',\n  }\n})\n\nexport class ChipsComponent {\n  \n  selectorOpen: boolean = false;\n  searchString: string = '';\n  \n  // default value\n  @Input() value: any[] = [];\n  \n  // is it disabled or \"readonly\"\n  @Input() disabled: boolean = false;\n  \n  // available options\n  @Input() options: any[] = [];\n  \n  // placeholder text on empty state\n  @Input() emptyState: string = 'Select Tag';\n  \n  // the tag to add another\n  @Input() placeholder: string = '+ Tag';\n  \n  // keep open to allow multiple to be selected?\n  @Input() keepopen: boolean = false;\n  \n  // allow multiple options\n  @Input() multiple: boolean = false;\n  \n  @Input() displayKey: string = 'display';\n  @Input() valueKey: string = 'value';\n  \n  // emitter to emit a change...\n  @Output() onChange = new EventEmitter<any[]>();\n  \n  iterableDiffer: any;\n  \n  optionsPointer: number = -1;\n  \n  constructor(\n    private ref: ChangeDetectorRef,\n    private _iterableDiffers: IterableDiffers\n  ) { \n    this.iterableDiffer = this._iterableDiffers.find([]).create(null);\n  }\n  \n  ngOnInit(){\n    let self = this;\n    /*\n    document.onkeydown = function(event){\n      if (event.keyCode == 38){ // up\n        self.optionsPointer--;\n      } else if (event.keyCode == 40) { // down\n        self.optionsPointer++;\n      }\n    }\n    */\n  }\n  \n  \n  add(option: any){\n    this.value.push(option);\n    if (this.keepopen && this.getOptions().length) this.openSelector();\n    this.optionsPointer = -1;\n    this.onChange.next(this.value);\n  }\n  \n  remove(option: any){\n    this.value = this.value.filter( v => v[this.valueKey] != option[this.valueKey] );\n    this.onChange.next(this.value);\n  }\n  \n  getOptions(){\n    let self = this;\n    if (!this.value) this.value = [];\n    return this.options.filter( o => this.value.map( v => v[this.valueKey] ).indexOf(o[this.valueKey]) == -1 ).filter( o => self.searchString == '' || o[this.displayKey].toLowerCase().indexOf( self.searchString.toLowerCase()) > -1);\n  }\n  \n  toggleSelector(){\n    if (!this.selectorOpen && this.value.length && !this.multiple) return;\n    if (this.selectorOpen) this.closeSelector();\n    else this.openSelector();\n  }\n  \n  search(event?){\n    this.searchString = event.target.value;\n    this.ref.detectChanges();\n  }\n  \n  openSelector(){\n    let self = this;\n    setTimeout(() => {\n      self.selectorOpen = true;\n    },100)\n  }\n  \n  closeSelector(){\n    if (!this.selectorOpen) return;\n    this.selectorOpen = false;\n    this.searchString = '';\n    this.ref.detectChanges();\n  }\n  \n  ngDoCheck() {\n    if (!this.value) return;\n    let changes = this.iterableDiffer.diff(this.value);\n    if (changes) {\n      let proposed = this.value.filter( (v,idx,self) => self.map( m => m[this.valueKey]).indexOf(v[this.valueKey]) === idx );\n      if (this.value.length !== proposed.length) this.value = proposed;\n    }\n  }\n  \n}\n","import {Directive, Renderer, ElementRef, OnInit, AfterViewInit, Input} from '@angular/core';\n\n@Directive({\n  selector: '[focusOnInit]'\n})\nexport class FocusOnInitDirective implements OnInit, AfterViewInit {\n  @Input('focusOnInit') priority: number = 0;\n\n  static instances: FocusOnInitDirective[] = [];\n\n  constructor(public renderer: Renderer, public elementRef: ElementRef) {\n  }\n\n  ngOnInit(): void {\n    FocusOnInitDirective.instances.push(this)\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      FocusOnInitDirective.instances.splice(FocusOnInitDirective.instances.indexOf(this), 1);\n    });\n\n    if (FocusOnInitDirective.instances.every((i) => this.priority >= i.priority)) {\n      this.renderer.invokeElementMethod(\n        this.elementRef.nativeElement, 'focus', []);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ChipsComponent } from './chips.component';\nimport { FocusOnInitDirective } from './focus-on-init.directive';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    ChipsComponent,\n    FocusOnInitDirective\n  ],\n  exports: [ChipsComponent]\n})\nexport class ChipsModule { }\n"],"names":[],"mappings":"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"}
