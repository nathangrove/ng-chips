{"version":3,"file":"ng-chips.umd.js.map","sources":["ng://ng-chips/lib/chips.component.ts","ng://ng-chips/lib/focus-on-init.directive.ts","ng://ng-chips/lib/chips.module.ts"],"sourcesContent":["import { Component, ChangeDetectorRef, IterableDiffers, Input, Output, EventEmitter, AfterViewInit, ViewEncapsulation } from '@angular/core';\n\n\n@Component({\n  selector: 'ng-chips',\n  template: `\n  <div id=\"ng-chips-wrapper\" (click)=\"toggleSelector()\">\n  \n    <div class=\"placeholder\" *ngIf=\"!value.length\">{{ emptyState }}</div>\n    \n      <div *ngFor=\"let chip of value\" class=\"chipit\">\n        <div [ngClass]=\"{'disabled': disabled, 'value': true}\">{{ chip[displayKey] }}</div>\n        <div class=\"remove\" *ngIf=\"!disabled\" (click)=\"remove(chip)\">x</div>\n      </div>\n    \n      <div class=\"addition\" *ngIf=\"value.length && getOptions().length && !disabled && multiple\">{{ placeholder }}</div>\n    \n      <div class=\"clearfix\"></div>\n    </div>\n  \n    <div id=\"ng-chips-selector\" class=\"rounded\" *ngIf=\"selectorOpen\">\n      <input type=\"text\" (keyup)=\"search($event)\" class='search' placeholder=\"Search\" focusOnInit />\n    <div *ngFor=\"let option of getOptions()\" (click)=\"add(option)\" [ngClass]=\"{'option': true, 'focused': getOptions()[optionsPointer] == option }\">{{ option[displayKey] }}</div>\n  </div>\n  `,\n  styles: [`#ng-chips-wrapper{position:relative;line-height:1;min-height:50px;cursor:pointer;border:1px solid #d2d2d2;padding:5px;border-radius:2px}#ng-chips-wrapper .placeholder{float:left;color:grey;font-size:20px;margin-left:5px}#ng-chips-wrapper .chipit{float:left;background-color:#d6d6d6;border-radius:1000px;margin:3px;font-size:13px;height:32px;padding-left:12px}#ng-chips-wrapper .chipit .value{float:left;margin-right:4px;margin-top:9px}#ng-chips-wrapper .chipit .value.disabled{margin-right:12px}#ng-chips-wrapper .chipit .remove{text-align:center;float:left;background-color:#bdbdbd;color:#fff;border-radius:50%;width:24px;height:24px;margin:4px;padding-top:2px;font-size:18px}#ng-chips-wrapper .chipit:hover{background-color:#888;color:#fff}#ng-chips-wrapper .chipit:hover .remove{background-color:#fff;color:#888}#ng-chips-wrapper .addition{float:left;margin-top:12px;color:grey;font-size:13px}#ng-chips-wrapper .clearfix:after{visibility:hidden;display:block;font-size:0;content:\" \";clear:both;height:0}#ng-chips-wrapper * html .clearfix{zoom:1}#ng-chips-selector{background-color:#fff;z-index:1000;position:absolute;border:1px solid #c9c9c9;padding:3px;min-width:300px;max-height:200px;overflow-y:scroll;overflow-x:hidden}#ng-chips-selector .search{width:90%;margin:5px;border-width:0 0 1px;border-style:solid;border-color:#c9c9c9;outline:0;box-shadow:none!important}#ng-chips-selector .option{padding:3px}#ng-chips-selector .option .focused,#ng-chips-selector .option:hover{background-color:#d3d3d3}#ng-chips-selector .rounded{border-radius:5px}`],\n  host: {\n    '(document:click)': 'closeSelector()',\n  }\n})\n\nexport class ChipsComponent {\n  \n  selectorOpen: boolean = false;\n  searchString: string = '';\n  \n  // default value\n  @Input() value: any[] = [];\n  \n  // is it disabled or \"readonly\"\n  @Input() disabled: boolean = false;\n  \n  // available options\n  @Input() options: any[] = [];\n  \n  // placeholder text on empty state\n  @Input() emptyState: string = 'Select Tag';\n  \n  // the tag to add another\n  @Input() placeholder: string = '+ Tag';\n  \n  // keep open to allow multiple to be selected?\n  @Input() keepopen: boolean = false;\n  \n  // allow multiple options\n  @Input() multiple: boolean = false;\n  \n  @Input() displayKey: string = 'display';\n  @Input() valueKey: string = 'value';\n  \n  // emitter to emit a change...\n  @Output() onChange = new EventEmitter<any[]>();\n  \n  iterableDiffer: any;\n  \n  optionsPointer: number = -1;\n  \n  constructor(\n    private ref: ChangeDetectorRef,\n    private _iterableDiffers: IterableDiffers\n  ) { \n    this.iterableDiffer = this._iterableDiffers.find([]).create(null);\n  }\n  \n  ngOnInit(){\n    let self = this;\n    /*\n    document.onkeydown = function(event){\n      if (event.keyCode == 38){ // up\n        self.optionsPointer--;\n      } else if (event.keyCode == 40) { // down\n        self.optionsPointer++;\n      }\n    }\n    */\n  }\n  \n  \n  add(option: any){\n    this.value.push(option);\n    if (this.keepopen && this.getOptions().length) this.openSelector();\n    this.optionsPointer = -1;\n    this.onChange.next(this.value);\n  }\n  \n  remove(option: any){\n    this.value = this.value.filter( v => v[this.valueKey] != option[this.valueKey] );\n    this.onChange.next(this.value);\n  }\n  \n  getOptions(){\n    let self = this;\n    if (!this.value) this.value = [];\n    return this.options.filter( o => this.value.map( v => v[this.valueKey] ).indexOf(o[this.valueKey]) == -1 ).filter( o => self.searchString == '' || o[this.displayKey].toLowerCase().indexOf( self.searchString.toLowerCase()) > -1);\n  }\n  \n  toggleSelector(){\n    if (!this.selectorOpen && this.value.length && !this.multiple) return;\n    if (this.selectorOpen) this.closeSelector();\n    else this.openSelector();\n  }\n  \n  search(event?){\n    this.searchString = event.target.value;\n    this.ref.detectChanges();\n  }\n  \n  openSelector(){\n    let self = this;\n    setTimeout(() => {\n      self.selectorOpen = true;\n    },100)\n  }\n  \n  closeSelector(){\n    if (!this.selectorOpen) return;\n    this.selectorOpen = false;\n    this.searchString = '';\n    this.ref.detectChanges();\n  }\n  \n  ngDoCheck() {\n    if (!this.value) return;\n    let changes = this.iterableDiffer.diff(this.value);\n    if (changes) {\n      let proposed = this.value.filter( (v,idx,self) => self.map( m => m[this.valueKey]).indexOf(v[this.valueKey]) === idx );\n      if (this.value.length !== proposed.length) this.value = proposed;\n    }\n  }\n  \n}\n","import {Directive, Renderer, ElementRef, OnInit, AfterViewInit, Input} from '@angular/core';\n\n@Directive({\n  selector: '[focusOnInit]'\n})\nexport class FocusOnInitDirective implements OnInit, AfterViewInit {\n  @Input('focusOnInit') priority: number = 0;\n\n  static instances: FocusOnInitDirective[] = [];\n\n  constructor(public renderer: Renderer, public elementRef: ElementRef) {\n  }\n\n  ngOnInit(): void {\n    FocusOnInitDirective.instances.push(this)\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      FocusOnInitDirective.instances.splice(FocusOnInitDirective.instances.indexOf(this), 1);\n    });\n\n    if (FocusOnInitDirective.instances.every((i) => this.priority >= i.priority)) {\n      this.renderer.invokeElementMethod(\n        this.elementRef.nativeElement, 'focus', []);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ChipsComponent } from './chips.component';\nimport { FocusOnInitDirective } from './focus-on-init.directive';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    ChipsComponent,\n    FocusOnInitDirective\n  ],\n  exports: [ChipsComponent]\n})\nexport class ChipsModule { }\n"],"names":["EventEmitter","Component","ChangeDetectorRef","IterableDiffers","Input","Output","Directive","Renderer","ElementRef","NgModule","CommonModule"],"mappings":";;;;;;;;;;AAAA;QAmEE,wBACU,KACA;YADA,QAAG,GAAH,GAAG;YACH,qBAAgB,GAAhB,gBAAgB;gCApCF,KAAK;gCACN,EAAE;;yBAGD,EAAE;;4BAGG,KAAK;;2BAGR,EAAE;;8BAGE,YAAY;;+BAGX,OAAO;;4BAGT,KAAK;;4BAGL,KAAK;8BAEJ,SAAS;4BACX,OAAO;;4BAGd,IAAIA,iBAAY,EAAS;kCAIrB,CAAC,CAAC;YAMzB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACnE;;;;QAED,iCAAQ;;;YAAR;;;;;;;;;;aAWC;;;;;QAGD,4BAAG;;;;YAAH,UAAI,MAAW;gBACb,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACxB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,MAAM;oBAAE,IAAI,CAAC,YAAY,EAAE,CAAC;gBACnE,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;gBACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAChC;;;;;QAED,+BAAM;;;;YAAN,UAAO,MAAW;gBAAlB,iBAGC;gBAFC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,KAAI,CAAC,QAAQ,CAAC,GAAA,CAAE,CAAC;gBACjF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAChC;;;;QAED,mCAAU;;;YAAV;gBAAA,iBAIC;gBAHC,qBAAI,IAAI,GAAG,IAAI,CAAC;gBAChB,IAAI,CAAC,IAAI,CAAC,KAAK;oBAAE,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;gBACjC,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAE,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,KAAK,CAAC,GAAG,CAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,GAAA,CAAE,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,GAAA,CAAE,CAAC,MAAM,CAAE,UAAA,CAAC,IAAI,OAAA,IAAI,CAAC,YAAY,IAAI,EAAE,IAAI,CAAC,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE,CAAC,OAAO,CAAE,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,GAAA,CAAC,CAAC;aACrO;;;;QAED,uCAAc;;;YAAd;gBACE,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ;oBAAE,OAAO;gBACtE,IAAI,IAAI,CAAC,YAAY;oBAAE,IAAI,CAAC,aAAa,EAAE,CAAC;;oBACvC,IAAI,CAAC,YAAY,EAAE,CAAC;aAC1B;;;;;QAED,+BAAM;;;;YAAN,UAAO,KAAM;gBACX,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;gBACvC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;aAC1B;;;;QAED,qCAAY;;;YAAZ;gBACE,qBAAI,IAAI,GAAG,IAAI,CAAC;gBAChB,UAAU,CAAC;oBACT,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;iBAC1B,EAAC,GAAG,CAAC,CAAA;aACP;;;;QAED,sCAAa;;;YAAb;gBACE,IAAI,CAAC,IAAI,CAAC,YAAY;oBAAE,OAAO;gBAC/B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;gBAC1B,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBACvB,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;aAC1B;;;;QAED,kCAAS;;;YAAT;gBAAA,iBAOC;gBANC,IAAI,CAAC,IAAI,CAAC,KAAK;oBAAE,OAAO;gBACxB,qBAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACnD,IAAI,OAAO,EAAE;oBACX,qBAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAE,UAAC,CAAC,EAAC,GAAG,EAAC,IAAI,IAAK,OAAA,IAAI,CAAC,GAAG,CAAE,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,GAAA,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,GAAG,GAAA,CAAE,CAAC;oBACvH,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,QAAQ,CAAC,MAAM;wBAAE,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;iBAClE;aACF;;oBAvIFC,cAAS,SAAC;wBACT,QAAQ,EAAE,UAAU;wBACpB,QAAQ,EAAE,s9BAmBT;wBACD,MAAM,EAAE,CAAC,khDAAghD,CAAC;wBAC1hD,IAAI,EAAE;4BACJ,kBAAkB,EAAE,iBAAiB;yBACtC;qBACF;;;;;wBA7BmBC,sBAAiB;wBAAEC,oBAAe;;;;8BAqCnDC,UAAK;iCAGLA,UAAK;gCAGLA,UAAK;mCAGLA,UAAK;oCAGLA,UAAK;iCAGLA,UAAK;iCAGLA,UAAK;mCAELA,UAAK;iCACLA,UAAK;iCAGLC,WAAM;;6BA7DT;;;;;;;ACAA;QAUE,8BAAmB,QAAkB,EAAS,UAAsB;YAAjD,aAAQ,GAAR,QAAQ,CAAU;YAAS,eAAU,GAAV,UAAU,CAAY;4BAJ3B,CAAC;SAKzC;;;;QAED,uCAAQ;;;YAAR;gBACE,oBAAoB,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;aAC1C;;;;QAED,8CAAe;;;YAAf;gBAAA,iBASC;gBARC,UAAU,CAAC;oBACT,oBAAoB,CAAC,SAAS,CAAC,MAAM,CAAC,oBAAoB,CAAC,SAAS,CAAC,OAAO,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC,CAAC;iBACxF,CAAC,CAAC;gBAEH,IAAI,oBAAoB,CAAC,SAAS,CAAC,KAAK,CAAC,UAAC,CAAC,IAAK,OAAA,KAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,QAAQ,GAAA,CAAC,EAAE;oBAC5E,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAC/B,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC;iBAC/C;aACF;yCAlB0C,EAAE;;oBAN9CC,cAAS,SAAC;wBACT,QAAQ,EAAE,eAAe;qBAC1B;;;;;wBAJkBC,aAAQ;wBAAEC,eAAU;;;;iCAMpCJ,UAAK,SAAC,aAAa;;mCANtB;;;;;;;ACAA;;;;oBAKCK,aAAQ,SAAC;wBACR,OAAO,EAAE;4BACPC,mBAAY;yBACb;wBACD,YAAY,EAAE;4BACZ,cAAc;4BACd,oBAAoB;yBACrB;wBACD,OAAO,EAAE,CAAC,cAAc,CAAC;qBAC1B;;0BAdD;;;;;;;;;;;;;;;;;;;;;;;;;"}
